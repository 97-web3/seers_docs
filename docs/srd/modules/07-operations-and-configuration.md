---
标题：模块规范 — 运营与配置
版本：0.1
最后更新时间：2025-12-14
所有者：产品与工程
状态：草稿
---

# 1. 模块概述

## 模块名称和标识符
- 名称：运营与配置
- ID：MOD-OPERATIONS-CONFIG

## 目的
提供受配置驱动的控件，影响发现排名、特色市场、可用玩法类型、趣味玩法定义和预设资产，使运营团队无需更改代码即可引导产品。

## 范围
- 范围内：必需的配置能力及其对客户端体验的影响（不包括管理控制台的实现）。
- 范围外：完整的运营 UI/控制台设计；仅包括集成要求和配置语义。

## 模块边界
适用于任何依赖于运营配置的发现、市场创建和内容展示的场景。

## 依赖项
- 配置端点 ([运营配置 API](../api-specifications/operations.md))
- 特色/置顶选择逻辑 ([事件发现](01-event-discovery.md))
- 市场创建玩法类型和趣味玩法配置 ([市场创建（博彩商）](05-market-creation-bookmaker.md))
- 媒体预设库 ([媒体存储](../integrations/media-storage.md))

## 利益相关者
- 运营、产品、工程

# 2. 功能需求

## 需求列表
- FR-OC-001：系统应支持运营人员定义的特色市场，用于体育主页的特色区域。
- FR-OC-002：系统应支持影响市场列表排序的置顶权重。
- FR-OC-003：系统应支持配置发现中可用的体育类别及其启用/禁用状态。
- FR-OC-004：系统应支持配置每个体育类别的可用玩法类型。
- FR-OC-005：系统应支持配置每个体育类别的趣味玩法定义，包括：
  - 玩法名称
  - 问题模板
  - 选项生成规则（例如，队伍、静态选项、自定义列表）
- FR-OC-006：系统应支持配置用于交易报价显示和计算的费用率。
- FR-OC-007：系统应支持市场创建的预设封面图片目录。
- FR-OC-008：系统应支持配置裁决相关的用户可见参数（例如挑战期时长、预言机/仲裁提供方显示名），或提供稳定的默认值（参见 `integrations/oracle-and-dispute-resolution.md`）。

## 用户故事
- 作为运营人员，我希望能够特色化特定的市场，以便将流量引导至优先事件。
- 作为运营人员，我希望能够调整每个体育项目的玩法产品，以便管理复杂性和风险。

## 用例
### UC-OC-001：特色化一个市场
- 参与者：运营人员
- 前置条件：运营配置工具存在
- 主要流程：
  1. 运营人员标记一个市场为特色。
  2. 配置传播到客户端。
  3. 特色区域根据发现规则优先显示运营人员的选择。

## 业务规则
- BR-OC-001：特色选择覆盖计算出的受欢迎程度。
- BR-OC-002：配置必须进行版本控制；客户端应能够请求最新版本并处理不兼容的更改（参见 [运营配置 API](../api-specifications/operations.md)）。

## 验证规则
- VR-OC-001：配置值在发布前必须在服务器端进行验证（例如，费用率范围、玩法类型标识符）。

# 3. API 规范（技术无关）
参见 [运营配置 API](../api-specifications/operations.md)。

## 端点定义（摘要）
- `GET /api/config/featured-markets`
- `GET /api/config/pinned-weights`
- `GET /api/config/sports`
- `GET /api/config/play-types?sportId={sportId}`
- `GET /api/config/fun-plays?sportId={sportId}`
- `GET /api/config/fee-rate`

# 4. 数据模型和模式
参见 [实体](../data-models/entities.md) 和 [枚举](../data-models/enumerations.md)。

# 5. 业务逻辑要求
- BL-OC-001：客户端必须将配置视为建议性但一致的；如果配置不可用，客户端应回退到安全默认值（例如，没有特色市场）。

# 6. 集成点
- 管理/运营提供者发布配置，供面向客户端的 API 消费。

# 7. 非功能性需求
- NFR-OC-001：配置交付必须具有高可用性；故障不得破坏核心浏览/交易流程。
- NFR-OC-002：配置更改必须可审计，并可追溯到运营人员的操作（此 SRD 之外拥有，但要求）。

# 8. 验收标准
- AC-OC-001：当配置了特色市场时，发现特色部分应反映它们。
- AC-OC-002：更改费用率应在客户端和服务器端一致地影响报价计算。
- AC-OC-003：禁用体育类别会将其从筛选列表中移除，并阻止选择。
